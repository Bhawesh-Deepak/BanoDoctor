function Dynamsoft_OnReady_Layout(){var e,r,s,u,f,i,n,t;if($("#NoScannerFound").html(""),$("#NoScannerFoundLayout").html(""),DWObject=Dynamsoft.WebTwainEnv.GetWebTwain("dwtcontrolContainer"),e=$("#hdnCurrentPage").val(),e!="PrinterSetup"&&e=="GetAllPrescriptions")if(r="",$.ajax({type:"POST",url:"/Setting/PrinterSetup/GetDefaultScannerName","async":!1,dataType:"json",success:function(n){r=n.result!=null?n.result:""},error:function(){r="";console.warn("Error occurred in Dynamsoft_OnReady_Layout method!")}}),DWObject=Dynamsoft.WebTwainEnv.GetWebTwain("dwtcontrolContainer"),DWObject!=null&&r!=""){var u=DWObject.SourceCount,f=0,o=[];for(n=0;n<u;n++)o.push(DWObject.GetSourceNameItems(n));f=o.indexOf(r);f>=0?u>0?(DWObject&&(DWObject.SelectSourceByIndex(f),DWObject.IfShowUI=!1,s=OnAcquireImageFailure=function(){DWObject.CloseSource();var n=DWObject.HowManyImagesInBuffer;DWObject.IfShowProgressBar=!1;DWObject.ConvertToBase64([n-1],EnumDWT_ImageType.IT_PDF,asyncSuccessFunc,asyncFailureFunc)},DWObject.OpenSource(),DWObject.IfDisableSourceAfterAcquire=!0,DWObject.AcquireImage(s,OnAcquireImageFailure)),$("#btnRxSave").attr("disabled",!0)):console.warn("No TWAIN compatible drivers detected!"):console.warn("Scanner Device Not Found!")}else OpenScannerModelOnFly();if(DWObject!=null){if(_isBothUtilityInstalled=!1,u=DWObject.SourceCount,f=0,u>0){for(i=[],n=0;n<u;n++)i.push(DWObject.GetSourceNameItems(n));if(i.sort(),$("#ddlScannerList").length>0&&$("#ddlScannerList option").length<=1){for($("#ddlScannerList").empty(),t="",t+='<option value="0">--Select--<\/option>',n=0;n<i.length;n++)t+='<option value="'+i[n]+'">'+i[n]+"<\/option>";$("#ddlScannerList").html(t);BindScannerSettingDataForStore()}if($("#ddlScannerListUser option").length<=1){for($("#ddlScannerListUser").empty(),t="",t+='<option value="0">--Select--<\/option>',n=0;n<i.length;n++)t+='<option value="'+i[n]+'">'+i[n]+"<\/option>";$("#ddlScannerListUser").html(t);BindScannerSettingDataForUser()}}else $("#NoScannerFound").html("There is no scanner linked for scanning."),$("#NoScannerFoundLayout").html("There is no scanner linked for scanning."),t='<option value="0">--Select--<\/option>',$("#ddlScannerList").html(t),$("#ddlScannerListUser").html(t);$("#dvScannerInstallation").hide();$("#dvScannerOptionForStore").show();$("#dvScannerOptionForUser").show();$("#dvPrinterGridForStore").removeClass("ajaxLoading")}else _isBothUtilityInstalled=!0,console.log("DWObject Not Found!");$("#dvScannerGridForStore").removeClass("ajaxLoading");$("#dvScannerGridForUser").removeClass("ajaxLoading")}function OmnieANotification(n,t,i){n==1?($("#AlertHeader").html(i),$("#lblEMessage").html(t)):n==2?($("#AlertHeader").html(i),$("#lblEMessage").html(t)):n==0&&($("#AlertHeader").html(i),$("#lblEMessage").html(t));$("#AlertModal").modal("show")}function OkFunction(){window.location.reload()}function CancelFunction(){}function ChangeStore(){location.href="/Account/ChangeStore?url="+$(location).attr("href")}function NewStore(){location.href="/Settings/SystemBasicInformation/Create?storeId=-1"}function OpenChangePasswordPartial(){$.get("/Account/ResetPassword",function(n){$("#modalTitle").html("Change Password");$("#_divStoreList").html(n);$("#ChangeStoreModal").modal("show")})}function ExpandCollpseLi(){$("#_ulStoreList").toggle()}function MasterAdvanceSearch(){switch(searchBy){case"pat":PatientSearch();break;case"pres":PrescriberSearch();break;case"drugs":ProductSearch();break;case"thirdparty":ThirdPartySearch();break;case"pricing":PricingSearch();break;case"carefacility":CareFacilitySearch();break;case"Vendor":var n=$("#txtVendorNameAdvSearch").val(),t=$("#txtContactPersonAdvSearch").val();VendorSearch(n,t);break;case"proc":ProcessQueueSearch()}}function PatientSearch(n){var t=!1;if($.get("/Patient/PatientBasicInformation/PatientSearchParams?isRelative="+t,function(n){n.search("sessionModel")>0&&location.reload();$("#_divPatientSearch").html(n);$("#hdnRelative").val(t);$("#_divselectPatientModel").modal("show");$("#phonenumber").inputmask({mask:"(999)999-9999",autoUnmask:!0,removeMaskOnSubmit:!0,greedy:!1});$("#ZIP").mask("00000-0000");var i=$("#txtLastFirstNameSearch").val().split(",");$("#_divselectPatientModel").find("#LastName").val(i[0]);$("#_divselectPatientModel").find("#FirstName").val(i[1]);$("#_divselectPatientModel").find("#phonenumber").val($("#txtPhoneSearch").val());$("#_divselectPatientModel").find("#MRN").val($("#txtMRNSearch").val());$("#_divselectPatientModel").find("#RX").val($("#txtRxSearch").val());$("#_divselectPatientModel").find("#Address").val($("#txtAddressSearch").val());$("#_divselectPatientModel").find("#City").val($("#txtCitySearch").val());$("#_divselectPatientModel").find("#State").val($("#ddlStateSearch").val());$("#_divselectPatientModel").find("#ZIP").val($("#txtZipSearch").val());$("#DateOfBirth").attr("type","text").addClass("date");$("#_divselectPatientModel").on("shown.bs.modal",function(){$("#_divselectPatientModel").find("#DateOfBirth").val($("#txtDateSearch").val());$("#_divPatientSearch .fieldset:first").find('[type="text"]:first').focus();$("#btnSearchPatient").trigger("click")})}),n=="forE1"){$("#btnGetPatientSearch").prop("onclick",null).off("click");$("#btnGetPatientSearch").on("click",function(){var t=$("#tblSearchPatientResultSelect").find(".selected #Id").val();PatientEligibilityData(t,n=="forE1"?!0:!1,$("#ddlEligibility").val());$("#_divselectPatientModel").modal("hide")})}else{$("#btnGetPatientSearch").prop("onclick",null).off("click");$("#btnGetPatientSearch").on("click",function(){return getPatientSelect()})}}function PatientEligibilityData(n,t,i){$.get("/Patient/PatientThirdParty/PatientEligibility",{PatientId:n,isDisplaySelect:t,planId:i},function(n){$("#_divPatientEligibility").html(n);setTimeout(function(){$("#checkEligibility").modal("show")},700)})}function PrescriberSearch(){$.get("/Prescriber/BasicInformation/PrescriberSearchParams",function(n){n.search("sessionModel")>0&&location.reload();$("#_prescriberSearchDiv").html(n);$("#divSelectPrescriberModel").modal("show");$("#phonenumber").inputmask({mask:"(999)999-9999",autoUnmask:!0,removeMaskOnSubmit:!0,greedy:!1});$("#zip").mask("00000-0000");$("#DateOfBirth").attr("type","text").addClass("date");var t=$("#txtPresLastFirstNameSearch").val().split(",");$("#lname").val(t[0]);$("#fname").val(t[1]);$("#phonenumber").val($("#txtPresPhoneSearch").val());$("#licensetype").val($("#ddlPresLicenseTypeSearch").val());$("#licensenumber").val($("#txtPresLicenseNumberSearch").val());$("#address").val($("#txtPresAddressSearch").val());$("#city").val($("#txtPresCitySearch").val());$("#State").val($("#ddlPresStateSearch").val());$("#zip").val($("#txtPresZipSearch").val());$("#divSelectPrescriberModel").on("shown.bs.modal",function(){$("#_prescriberSearchDiv .fieldset:first").find('[type="text"]:first').focus();$("#btnSearchPrescriber").trigger("click")})})}function ProductSearch(){$.get("/Product/ProductBasicInformation/ProductBasicInformationSearch",function(n){n.search("sessionModel")>0&&location.reload();$("#_divproductBasicInfoSearch").html(n);$("#_divselectProduct").modal("show");$("#btnSelectProduct").prop("disabled",!0);$("input[id$='txtProductname']").val($("#txtproductNameSearch").val());$("input[id$='txtNDC']").val($("#txtNDCSearch").val());$("input[id$='txtGPI']").val($("#txtGPISearch").val());$("#_divselectProduct").on("shown.bs.modal",function(){$("#_divproductBasicInfoSearch .fieldset:first").find('[type="text"]:first').focus();$("#btnSearchProduct").trigger("click")})})}function ThirdPartySearch(){$.get("/ThirdParty/ThirdPartyBasicInformation/ThirdPartyBasicInformationSearch",function(n){n.search("sessionModel")>0&&location.reload();$("#_divthirdPartyBasicInfoSearch").html(n);$("#_divselectThirdParty").modal("show");$("input[id$='txtThirdParty']").val($("#txtpayerNameSearch").val());$("input[id$='txtBIN']").val($("#txtBINSearch").val());$("#_divselectThirdParty").on("shown.bs.modal",function(){$("#_divthirdPartyBasicInfoSearch .fieldset:first").find('[type="text"]:first').focus();$("#btnSearchThirdParty").trigger("click")})})}function PricingSearch(){$.get("/Pricing/PricingBasicInformation/PricingBasicInformationSearch",function(n){n.search("sessionModel")>0&&location.reload();$("#_divpricingBasicInfoSearch").html(n);$("#_divselectPricing").modal("show");$("input[id$='txtPriceSchedule']").val($("#txtpriceScheduleSearch").val());$("select[id$='ddlDiscountTypeId']").val($("#ddlDiscountTypeSearch").val());$("select[id$='ddlCostBasisId']").val($("#ddlCostBasisSearch").val());$("select[id$='ddlTherapyClassId']").val($("#ddlTherapyClass").val());$("#_divselectPricing").on("shown.bs.modal",function(){$("#_divpricingBasicInfoSearch .fieldset:first").find('[type="text"]:first').focus();$("#btnSearchPricing").trigger("click")})})}function CareFacilitySearch(){$.get("/CareFacility/CareFacilityBasicInformation/CareFacilitySearchParams",function(n){n.search("sessionModel")>0&&location.reload();$("#_divcarefacilitySearch").html(n);$("#_divselectCareFacilityModel").modal("show");$("#phonenumber").mask("0000000000");$("#zip").mask("000000000");$("input[id$='Name']").val($("#txtCFNameSearch").val());$("input[id$='abbr']").val($("#txtCFAbbrSearch").val());$("input[id$='phonenumber']").val($("#txtCFPhoneSearch").val());$("input[id$='address']").val($("#txtCFAddressSearch").val());$("input[id$='city']").val($("#txtCFCitySearch").val());$("select[id$='state']").val($("#ddlCFStateSearch").val());$("input[id$='zip']").val($("#txtCFZipSearch").val());$("#DateOfBirth").attr("type","text").addClass("date");$("#_divselectCareFacilityModel").on("shown.bs.modal",function(){$("#_divcarefacilitySearch .fieldset:first").find('[type="text"]:first').focus();$("#btnSearchCareFacility").trigger("click")})})}function ProcessQueueSearch(){var t=$.trim($("#txtProcessRxNumber").val()),n=$("#txtProcessPatientName").val().split(","),i=n[1]==undefined?"":$.trim(n[1]),r=n[0]==undefined?"":$.trim(n[0]),u=$.trim($("#txtProcessPhoneNo").val()),f=$.trim($("#txtProcessDateOfBirth").val());t==""&&i==""&&r==""&&u==""&&f==""?$("#txtProcessRxNumber").focus():setTimeout(function(){window.location.href="/ProcessQueue/ProcessQueueStages/Create?RxNumber="+t+"&FirstName="+i+"&LastName="+r+"&PatientPhoneNumber="+u+"&PatientDOB="+f},100)}function getSelectedRow(){var n=$("#_prescriberSearchDiv").find('.selected input[type="hidden"]').val();return window.location.href="/Prescriber/BasicInformation/Create?prescriberId="+n,!0}function VendorSearch(n,t){$.get("/Inventory/VendorInformation/GetVendorPopup",function(i){i.search("sessionModel")>0&&location.reload();$("#_divVendorList").html(i);$("#selectVendor").modal("show");$("#txtVendorName").focus().val(n);$("#txtContactName").val(t);$("#selectVendor").on("shown.bs.modal",function(){$(".modal.fade:visible.active").find("#btnVendorSearch").one().trigger("click")})})}function GetSelectedSearchParam(n){$("#vendorHeaderSearch").attr("style","display: none");n.text==="Patient"||n=="Patient"?(searchBy="pat",localStorage.setItem("HeaderSearch","Patient"),$("#prescriberHeader").hide(),$("#productHeader").hide(),$("#thirdpartyHeader").hide(),$("#pricingHeader").hide(),$("#carefacilityHeader").hide(),$("#processQueueHeader").hide(),$("#patientHeader").show()):n.text==="Prescriber"||n=="Prescriber"?(searchBy="pres",localStorage.setItem("HeaderSearch","Prescriber"),$("#patientHeader").hide(),$("#productHeader").hide(),$("#thirdpartyHeader").hide(),$("#pricingHeader").hide(),$("#carefacilityHeader").hide(),$("#processQueueHeader").hide(),$("#prescriberHeader").show()):n.text==="Product"||n=="Product"?(searchBy="drugs",localStorage.setItem("HeaderSearch","Product"),$("#patientHeader").hide(),$("#thirdpartyHeader").hide(),$("#pricingHeader").hide(),$("#carefacilityHeader").hide(),$("#prescriberHeader").hide(),$("#processQueueHeader").hide(),$("#productHeader").show()):n.text==="Third Party"||n=="Third Party"?(searchBy="thirdparty",localStorage.setItem("HeaderSearch","Third Party"),$("#patientHeader").hide(),$("#pricingHeader").hide(),$("#carefacilityHeader").hide(),$("#prescriberHeader").hide(),$("#productHeader").hide(),$("#processQueueHeader").hide(),$("#thirdpartyHeader").show()):n.text==="Pricing"||n=="Pricing"?(searchBy="pricing",localStorage.setItem("HeaderSearch","Pricing"),$("#patientHeader").hide(),$("#carefacilityHeader").hide(),$("#prescriberHeader").hide(),$("#productHeader").hide(),$("#thirdpartyHeader").hide(),$("#processQueueHeader").hide(),$("#pricingHeader").show()):n.text==="Care Facility"||n=="Care Facility"?(searchBy="carefacility",localStorage.setItem("HeaderSearch","Care Facility"),$("#patientHeader").hide(),$("#prescriberHeader").hide(),$("#productHeader").hide(),$("#thirdpartyHeader").hide(),$("#pricingHeader").hide(),$("#processQueueHeader").hide(),$("#carefacilityHeader").show()):n.text==="Vendor"||n=="Vendor"?(searchBy="Vendor",localStorage.setItem("HeaderSearch","Vendor"),$("#patientHeader").hide(),$("#prescriberHeader").hide(),$("#productHeader").hide(),$("#thirdpartyHeader").hide(),$("#pricingHeader").hide(),$("#carefacilityHeader").hide(),$("#processQueueHeader").hide(),$("#vendorHeaderSearch").show(),$("#vendorHeaderSearch").removeAttr("style")):(n.text==="Process Queue"||n=="Process Queue")&&(searchBy="proc",localStorage.setItem("HeaderSearch","Process Queue"),$("#prescriberHeader").hide(),$("#productHeader").hide(),$("#thirdpartyHeader").hide(),$("#pricingHeader").hide(),$("#carefacilityHeader").hide(),$("#patientHeader").hide(),$("#processQueueHeader").show());$(".header-search.open").find(".header-search-wrap:visible .search-inner .search-fields>div:visible input:first").focus()}function getSelectedRowPrescriber(){var n=$("#tblPrescriberSearchPartial tbody tr.selected").attr("data-id"),t;return $("#chkSSP").is(":checked")&&(n===""||n==="00000000-0000-0000-0000-000000000000")?(t=$("#tblPrescriberSearchPartial tr.selected #tdSPI").text().trim(),window.location.href="/Prescriber/BasicInformation/GetPrescriberForSPI?SPINumber="+t):window.location.href="/Prescriber/BasicInformation/Create?prescriberId="+n,!0}function HideSelectedMenuItem(){}function ClearHeaderData(){$(".masterSearch").parent().find("input[type=text]").val("");$(".masterSearch").parent().find("select").val("0")}function SelectStore(n,t){$("#ddlStore").val()!=0?$.get("/Account/StoreSelected?storeId="+t+"&StoreName="+n,function(n){n.status&&window.location.reload()}):alert("Please select Store")}function CreateUrlforVendorJQGrid(){var n=$("#txtVendorName").val(),t=$("#txtContactName").val();return"/Inventory/VendorInformation/GetVendorSearchedPartialView?Name="+n+"&ContactName="+t}function GetSelectedRow(n){$("#btnVendorSelect").removeAttr("disabled");$(n).addClass("selected")}function GetSelectedVendor(){var n=0,t="";$.each($("#tblSearchvVendorResultSelect tbody tr.selected td"),function(i,r){n==1&&(t=r.innerText);n++});window.location.href="/Inventory/VendorInformation/VendorBasicInformation?id="+$("#tblSearchvVendorResultSelect tbody tr.selected").attr("data-id")+"&vendorName="+t}function ChangePrinter(){GeneratePrinterDivForUser();$("#ChangePrinterModalTitle").html("Printer / Scanner");$("#ChangePrinterModal").modal("show")}function ClosePrinterModal(){$("#ChangePrinterModal").modal("hide")}function CheckSessionIsAlive(){$.get("/Home/CheckSessionIsAlive",function(n){$("#divSession").html(n);$("#divSessionTimeOut").modal("show")})}function Dynamsoft_IsInstalled(){var n=!1;return $.ajax({type:"POST",url:"http://127.0.0.1:18622/f/VersionInfo?xxx","async":!1,data:'{ "id": "1", "method": "VersionInfo", "version": "dwt_trial_15100806", "parameter": [] }',dataType:"json",success:function(t,i,r){r.status==200&&(n=!0)},error:function(){}}),n}function GeneratePrinterDivForUser(){var t=0,n="";$.ajax({type:"POST",url:"/Account/GetAllActivePrinterType",data:null,"async":!1,dataType:"json",success:function(i){var r,f,u;if(i.result==1){for(t=i.objData.length-1,n='<div class="row" id="tblPrinterInfoUser">',r=1;r<t+1;r++)n+='<div class="col-xs-6 form-group" id="tr_'+r+'">',f="<label id='printerType' name='printerType' class='control-label'>",u="",u+='<span data-value="'+i.objData[r].id+'">'+i.objData[r].name+"<\/span>",n+=f+u+"<\/label>",n+='<select name="installedPrintersList" id="installedPrinter" class="form-control installedPrintersListUser"><\/select>',n+="<\/div>";n+="<\/div>";jspmGetPrintersForUser()}else console.log(i.message)},error:function(){console.log("Error occurred in GeneratePrinterDivForUser method!")}});$("#dvPrinterGridForUser").html(n);$("#hdnCurrentPage").val("Layout");Dynamsoft.WebTwainEnv.Load()}function SaveAndUpdatePrinterSettingForUser(){var n,r,t,u,f,e,o;if(ValidatePrinterSettingForUser()==1)if($("#IsOverridePrinterSetting").prop("checked"))n="/Setting/PrinterSetup/SetPrinterSettingForUserAsStoreSetting",$.ajax({url:n,type:"POST",dataType:"json",success:function(n){console.log(n);n.result==1}});else{n="/Account/SetPrinterSettingForUser";r=[];for(i=0;i<$($("#tblPrinterInfoUser")[0]).children().length;i++)u=$($($($($("#tblPrinterInfoUser")[0]).children()[i]).children()[0]).children()[0]).attr("data-value"),f=$($($($($("#tblPrinterInfoUser")[0]).children()[i]).children()[0]).siblings()).find("option:selected").text(),t={},t.PrinterTypeId=u,t.PrinterName=f.replace("--Select--","0"),r.push(t);$.ajax({url:n,type:"POST",dataType:"json",data:{objList:r},success:function(n){n.result==1}})}if($("#ddlScannerListUser").val()!=null&&ValidatePrinterSettingForUser()>0)e="/Setting/PrinterSetup/SetScannerSettingForUser",o=$("#ddlScannerListUser").val(),$.ajax({url:e,type:"POST",dataType:"json",data:{DefaultScannerName:o},success:function(n){n.result==1?alert("Data saved successfully!").then(function(){window.location.reload()}):console.log(n.message)}});else if(ValidatePrinterSettingForUser()==1)alert("Data saved successfully!").then(function(){window.location.reload()});else return $("#ddlScannerListUser").focus(),!1}function ValidatePrinterSettingForUser(){if($("#tblPrinterInfoUser").length>0)$("#tblPrinterInfoUser").each(function(){var n=$($($($($(this).children()[0]).children()[0]).children()[0]).children()[0]).attr("data-value"),t=$($($($($(this).children()[0]).children()[0]).children()[0]).siblings()).val()});else return 2;return 1}function BindPrinterSettingDataForUser(){$.ajax({type:"POST",url:"/Account/GetPrinterSettingForUser",data:null,"async":!1,dataType:"json",success:function(n){var i,t;if(n.isoverride==!0){for(i=document.getElementById("dvPrinterGridForUser").getElementsByTagName("*"),t=0;t<i.length;t++)i[t].disabled=!0;$("#IsOverridePrinterSetting").attr("checked",!0)}else{for(i=document.getElementById("dvPrinterGridForUser").getElementsByTagName("*"),t=0;t<i.length;t++)i[t].disabled=!1;$("#IsOverridePrinterSetting").attr("checked",!1)}if(n.result==1)for(t=0;t<$($("#tblPrinterInfoUser")[0]).children().length;t++){const i=n.objData[t];typeof i!="undefined"&&($($($($($("#tblPrinterInfoUser")[0]).children()[t]).children()[0]).siblings()).find("option:contains("+i.printerName+")").length>0?$($($($("#tblPrinterInfoUser")[0]).children()[t]).children()[0]).siblings().val(i.printerName):$($($($("#tblPrinterInfoUser")[0]).children()[t]).children()[0]).siblings().val("0"))}else console.log(n.message)},error:function(){console.log("Error occurred in BindPrinterSettingDataForUser method!")}})}function OverrideStorePrinterSetting(){$.ajax({type:"POST",url:"/Account/GetPrinterSettingForStore",data:null,"async":!1,dataType:"json",success:function(n){if(n.result==1)for(i=0;i<$($("#tblPrinterInfoUser")[0]).children().length;i++){const t=n.objData[i];typeof t!="undefined"&&($($($($($("#tblPrinterInfoUser")[0]).children()[i]).children()[0]).siblings()).find("option:contains("+t.printerName+")").length>0?$($($($("#tblPrinterInfoUser")[0]).children()[i]).children()[0]).siblings().val(t.printerName):$($($($("#tblPrinterInfoUser")[0]).children()[i]).children()[0]).siblings().val("0"))}else console.log(n.message)},error:function(){console.log("Error occurred in OverrideStorePrinterSetting method!")}})}function CancelOverrideStorePrinterSetting(){$.ajax({type:"POST",url:"/Account/GetPrinterSettingForUser",data:null,"async":!1,dataType:"json",success:function(n){if(n.result==1)for(i=0;i<$($("#tblPrinterInfoUser")[0]).children().length;i++){const t=n.objData[i];typeof t!="undefined"&&($($($($($("#tblPrinterInfoUser")[0]).children()[i]).children()[0]).siblings()).find("option:contains("+t.printerName+")").length>0?$($($($("#tblPrinterInfoUser")[0]).children()[i]).children()[0]).siblings().val(t.printerName):$($($($("#tblPrinterInfoUser")[0]).children()[i]).children()[0]).siblings().val("0"))}else console.log(n.message)},error:function(){console.log("Error occurred in CancelOverrideStorePrinterSetting method!")}})}function PrinterOnFly(){GeneratePrinterDivOnFly();$("#OnFlyPrinterModalTitle").html("Select Printer");$("#OnFlyPrinterModal").modal("show")}function ClosePrinterOnFlyModal(){$("#OnFlyPrinterModal").modal("hide")}function PrintCommandOnFly(){var t=_htmlContentToPrint,i=_copiesToPrint,n=$("#installedPrinterOnFly").val();n!="0"&&jspmPrintOnFly(n,t,i)}function OpenScannerModelOnFly(){GenerateScannerModelOnFly();$("#OnFlyScannerModalTitle").html("Select Scanner");$("#OnFlyScannerModal").modal("show")}function CloseScannerModelOnFly(){$("#OnFlyScannerModal").modal("hide")}function GenerateScannerModelOnFly(){var r,i,n,t;if(DWObject!=null)if($("#btnScannerOnFly").css("display","block"),$("#dvScannerOptionOnFly").css("display","block"),$("#dvScannerInstallationOnFly").css("display","none"),r=DWObject.SourceCount,r>0){for(i=[],n=0;n<r;n++)i.push(DWObject.GetSourceNameItems(n));if($("#ddlScannerListOnFly option").length<=1){for($("#ddlScannerListOnFly").empty(),t="",t+='<option value="0">--Select--<\/option>',n=0;n<i.length;n++)t+='<option value="'+i[n]+'">'+i[n]+"<\/option>";$("#ddlScannerListOnFly").html(t)}}else $("#NoScannerFoundLayoutOnFly").html("There is no scanner linked for scanning."),$("#ddlScannerListOnFly").empty(),t='<option value="0">--Select--<\/option>',$("#ddlScannerListOnFly").html(t),$("#btnScannerOnFly").css("display","none");else $("#btnScannerOnFly").css("display","none"),$("#dvScannerOptionOnFly").css("display","none"),$("#dvScannerInstallationOnFly").css("display","block")}function ScanCommandOnFly(){var i=$("#ddlScannerListOnFly").val(),n,f;if(i!=""){var r=DWObject.SourceCount,t=0,u=[];for(n=0;n<r;n++)u.push(DWObject.GetSourceNameItems(n));t=u.indexOf(i);t>=0&&(r>0?(DWObject&&(DWObject.SelectSourceByIndex(t),DWObject.IfShowUI=!1,f=OnAcquireImageFailure=function(){DWObject.CloseSource();var n=DWObject.HowManyImagesInBuffer;DWObject.IfShowProgressBar=!1;DWObject.ConvertToBase64([n-1],EnumDWT_ImageType.IT_PDF,asyncSuccessFunc,asyncFailureFunc)},DWObject.OpenSource(),DWObject.IfDisableSourceAfterAcquire=!0,DWObject.AcquireImage(f,OnAcquireImageFailure)),$("#btnRxSave").attr("disabled",!0)):console.log("No TWAIN compatible drivers detected!"))}$("#OnFlyScannerModal").modal("hide")}function BindScannerSettingDataForUser(){$.ajax({type:"POST",url:"/Setting/PrinterSetup/GetDefaultScannerNameByUser",data:null,"async":!1,dataType:"json",success:function(n){n.result!=null&&n.result!=""?$("#ddlScannerListUser option[value='"+n.result+"']").length>0?$('#ddlScannerListUser option[value="'+n.result+'"]').attr("selected","selected"):$('#ddlScannerListUser option[value="0"]').attr("selected","selected"):$('#ddlScannerListUser option[value="0"]').attr("selected","selected")},error:function(){console.log("Error occurred in BindScannerSettingDataForUser method!")}})}function GeneratePrinterDivForUserOld(){var t=0,i=2,n="";$.ajax({type:"POST",url:"/Account/GetAllActivePrinterType",data:null,"async":!1,dataType:"json",success:function(r){var u,f,o,e;if(r.result==1){for(t=r.objData.length-1,n='<table id="tblPrinterInfo" border="0" cellpadding="0" cellspacing="0">',u=0;u<t;u++){for(n+='<tr id="tr_'+u+'">',f=0;f<i;f++)f%2==0?(n+="<td>",o="<select id='printerType' name='printerType' class='form-control'>",e="",$.each(r.objData,function(n,t){e+='<option value="'+t.id+'">'+t.name+"<\/option>"}),n+=o+e+"<\/select>",n+="<\/td>"):(n+="<td>",n+='<select name="installedPrintersList" id="installedPrinter" class="form-control installedPrintersListUser"><\/select>',n+="<\/td>");n+="<\/tr>"}n+="<\/table>";jspmGetPrintersForUser()}else console.log(r.message)},error:function(){}});$("#dvPrinterGridForUser").html(n);$("#hdnCurrentPage").val("Layout");Dynamsoft.WebTwainEnv.Load()}function GeneratePrinterDiv(){var t=0,i=2,n="";$.ajax({type:"POST",url:"/Account/GetAllActivePrinterType",data:null,"async":!1,dataType:"json",success:function(r){var u,f,o,e;if(r.result==1){for(t=r.objData.length-1,n='<table id="tblPrinterInfo" border="0" cellpadding="0" cellspacing="0">',u=0;u<t;u++){for(n+='<tr id="tr_'+u+'">',f=0;f<i;f++)f%2==0?(n+="<td>",o="<select id='printerType' name='printerType' class='form-control'>",e="",$.each(r.objData,function(n,t){e+='<option value="'+t.id+'">'+t.name+"<\/option>"}),n+=o+e+"<\/select>",n+="<\/td>"):(n+="<td>",n+='<select name="installedPrintersList" id="installedPrinter" class="form-control installedPrintersList"><\/select>',n+="<\/td>");n+="<\/tr>"}n+="<\/table>";jspmGetPrinters()}else console.log(r.message)},error:function(){console.log("Error occurred in GeneratePrinterDiv method!")}});$("#dvPrinterGrid").html(n)}function BindPrinterSettingData(){$.ajax({type:"POST",url:"/Account/GetPrinterSettingForUser",data:null,"async":!1,dataType:"json",success:function(n){if(n.result==1)for(i=0;i<$("#tblPrinterInfo tr").length;i++){const t=n.objData[i];typeof t!="undefined"&&($($($($("#tblPrinterInfo tr")[i]).children()[0]).children()[0]).val(t.printerTypeId),$($($($($("#tblPrinterInfo tr")[i]).children()[0]).siblings()).children()[0]).val(t.printerName))}else alert(n.message)},error:function(){}})}function SaveAndUpdatePrinterFromMenu(){var i,n,t,r;if(ValidatePrinterSettingFormMenu()){i="/Account/SetPrinterSetting";n=[];let r=0;if($("#tblPrinterInfo tr").each(function(){var i=$($($(this).children()[0]).children()[0]).val(),r=$($($($(this).children()[0]).siblings()).children()[0]).val();t={};t.PrinterTypeId=i;t.PrinterName=r;n.push(t)}),Array.prototype.unique=function(){var n=[],t,u,i,f;n:for(t=0,u=this.length;t<u;t++){for(i=0,f=n.length;i<f;i++)if(n[i].PrinterTypeId>0&&n[i].PrinterTypeId==this[t].PrinterTypeId){r=r+1;continue n}n[n.length]=this[t]}return n},r=n.unique(),r>0)return alert("Yon can not override the setting for multiple printer type. Please check again!"),!1;$.ajax({url:i,type:"POST",dataType:"json",data:{objList:n},success:function(n){console.log(n);n.result==1?alert("Data saved successfully!").then(function(){window.location.reload()}):alert(n.message)}})}}function ValidatePrinterSettingFormMenu(){var n=0;return $("#tblPrinterInfo tr").each(function(){var t=$($($(this).children()[0]).children()[0]).val(),i=$($($($(this).children()[0]).siblings()).children()[0]).val();t>0&&i.toLowerCase()==="0"?($($($($(this).children()[0]).siblings()).children()[0]).css("border-color","#ff0000"),n++):$($($($(this).children()[0]).siblings()).children()[0]).css("border-color","#d9d9d9")}),n==0?!0:!1}var searchBy="pat",_htmlContentToPrint="",_copiesToPrint="",DWObject;Dynamsoft.WebTwainEnv.RegisterEvent("OnWebTwainReady",Dynamsoft_OnReady_Layout);$(document).ready(function(){var t,i,n;if(window.location.search!=""&&(window.location.search.toLowerCase().includes("search")?$("#txtLastFirstNameSearch").length>0&&$(".masterSearchBtn").length>0&&($("#txtLastFirstNameSearch").val("%"),$(".masterSearchBtn").trigger("click")):window.location.search.toLowerCase().includes("dispense")&&(window.location.search.toLowerCase().includes("scanned")?$(".prescriptionTab").each(function(){($(this).attr("data-id")=="scannedRx"||$(this).attr("id")=="scannedRx")&&$(this).children().trigger("click")}):window.location.search.toLowerCase().includes("e-prescription")?$(".prescriptionTab").each(function(){($(this).attr("data-id")=="eRx"||$(this).attr("id")=="eRx")&&$(this).children().trigger("click")}):window.location.search.toLowerCase().includes("pending")?$(".prescriptionTab").each(function(){($(this).attr("data-id")=="onFilePrescriptionsRx"||$(this).attr("id")=="onFilePrescriptionsRx")&&$(this).children().trigger("click")}):window.location.search.toLowerCase().includes("unclaimed")?$(".prescriptionTab").each(function(){($(this).attr("data-id")=="unclaimedPrescriptions"||$(this).attr("id")=="unclaimedPrescriptions")&&$(this).children().trigger("click")}):window.location.search.toLowerCase().includes("in-process")?$("#btnInProcessed").length>0&&$("#btnInProcessed").trigger("click"):window.location.search.toLowerCase().includes("processed")&&$("#btnProcessed").length>0&&$("#btnProcessed").trigger("click"))),sessionStorage.setItem("searchFilter",""),$("#txtPresZipSearch,#txtZipSearch").mask("00000-0000"),$("#txtPresPhoneSearch,#txtPhoneSearch").inputmask({mask:"(999)999-9999",autoUnmask:!0,removeMaskOnSubmit:!0,greedy:!1}),t=location.href.split("/"),localStorage.getItem("HeaderSearch")!=""){i=t[3];t.indexOf("Inventory")>=0&&t.indexOf("ProductVendorInventory")>=0&&(i="Product");$("#lblSearchParams").text(i);switch(i){case"Prescriber":GetSelectedSearchParam("Prescriber",1);break;case"ProcessQueue":GetSelectedSearchParam("Process Queue",1);break;case"ThirdParty":GetSelectedSearchParam("Third Party",1);break;case"Pricing":GetSelectedSearchParam("Pricing",1);break;case"Product":GetSelectedSearchParam("Product",1);break;case"Inventory":GetSelectedSearchParam("Vendor",1);break;case"CareFacility":GetSelectedSearchParam("Care Facility",1);break;default:GetSelectedSearchParam("Patient",1)}}$(".cancel").click(function(){confirm("Do you really want to cancel the changes?").then(function(n){n&&window.location.reload()})});$(".date").mask("00/00/0000");n=$("#hdnCurrentModule").val();$("#aCurrentModuleName").text(n);n=="Third Party"?($("#spanModuleIcon").attr("class","nav-ico third-party beforeIco"),$("._mainMenuId_Third").addClass("active")):n=="Care Facility"?$("#spanModuleIcon").attr("class","nav-ico care-facility beforeIco"):n=="Pricing"?($("#spanModuleIcon").attr("class","nav-ico pricing beforeIco"),$("._mainMenuId_Pricing").addClass("active")):n=="Patient"?$("#spanModuleIcon").attr("class","nav-ico patient beforeIco"):n=="Dispense"?$("#spanModuleIcon").attr("class","nav-ico dispensing beforeIco"):n=="Product"?$("#spanModuleIcon").attr("class","nav-ico product beforeIco"):n=="Prescriber"?$("#spanModuleIcon").attr("class","nav-ico prescriber beforeIco"):n=="Store Settings"?$("#spanModuleIcon").attr("class","nav-ico settings beforeIco"):n=="User Management"?$("#spanModuleIcon").attr("class","nav-ico UserAdmin beforeIco"):n=="Process Queue"?($("#spanModuleIcon").attr("class","nav-ico process-queues beforeIco"),$("._mainMenuId_Process").addClass("active")):n=="Vendor"?($("#spanModuleIcon").attr("class","nav-ico vendor beforeIco"),$("._mainMenuId_Inventory").addClass("active")):n=="Utilities"?($("#spanModuleIcon").attr("class","nav-ico utilities  beforeIco"),$("._mainMenuId_Utilities").addClass("active")):n=="E-Prescription"?($("#spanModuleIcon").attr("class","nav-ico e-prescription  beforeIco"),$("._mainMenuId_E-Prescription").addClass("active")):n=="Clinical"?($("#spanModuleIcon").attr("class","nav-ico clinical  beforeIco"),$("._mainMenuId_Clinical").addClass("active")):n=="Report"?($("#spanModuleIcon").attr("class","nav-ico reports  beforeIco"),$("._mainMenuId_Report").addClass("active")):n=="Pharmacy Settings"?$("#spanModuleIcon").attr("class","nav-ico settings  beforeIco"):($("#spanModuleIcon").attr("class","nav-ico dashboard beforeIco"),$("#aCurrentModuleName").text("Dashboard"));$(document).keydown(function(n){n.which==13&&$(".masterSearch").is(":focus")&&$(".masterSearchBtn").trigger("click")});HideSelectedMenuItem();localStorage.getItem("HeaderSearch")!=""&&$("#lblSearchParams").text(localStorage.getItem("HeaderSearch"));$(".clearMenuLocalStrg").click(function(){localStorage.removeItem("class")})});$("#IsOverridePrinterSetting").change(function(){var t,n;if(this.checked)for(OverrideStorePrinterSetting(),t=document.getElementById("dvPrinterGridForUser").getElementsByTagName("*"),n=0;n<t.length;n++)t[n].disabled=!0;else for(CancelOverrideStorePrinterSetting(),t=document.getElementById("dvPrinterGridForUser").getElementsByTagName("*"),n=0;n<t.length;n++)t[n].disabled=!1});$("#btnDownloadScannerManualOnFly").click(function(){var i=window.location.href,n=document.createElement("a"),t;n.href=i;t=n.protocol+"//"+n.host+"/js/Resources/dist/Scanner_Installation_Guide.pdf";$(this).attr("href",t);$(this).click()});$("#btnInstallSDkOnFly").click(function(){var i=window.location.href,n=document.createElement("a"),t;n.href=i;t=n.protocol+"//"+n.host+"/js/Resources/dist/PMSScannerUtility15.1.zip";$(this).parent().attr("href",t);$(this).parent().click()});$("#btnDownloadScannerManualForUser").click(function(){var i=window.location.href,n=document.createElement("a"),t;n.href=i;t=n.protocol+"//"+n.host+"/js/Resources/dist/Scanner_Installation_Guide.pdf";$(this).attr("href",t);$(this).click()});$("#btnInstallSDkForUser").click(function(){var i=window.location.href,n=document.createElement("a"),t;n.href=i;t=n.protocol+"//"+n.host+"/js/Resources/dist/PMSScannerUtility15.1.zip";$(this).parent().attr("href",t);$(this).parent().click()});