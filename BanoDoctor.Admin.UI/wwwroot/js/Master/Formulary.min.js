$(function(){$("[data-expand-collapse]").length&&$("[data-expand-collapse]").each(function(){var n=$(this),t=$(this).data("expand-collapse");$(t).on("click",function(){if(!(n.find("tr").length<=2)&&($(this).parents("tr").siblings("tr").find("td").slideUp(200),n.find("div.expIcon").length==0)){n.css("position","relative");$('<div class="expIcon curPointer posAbs f22" title="Expand">[+]<\/div>').css({bottom:"8px",right:"-30px"}).prependTo(n).on("click",function(){n.find("td").slideDown(200);$(this).remove()})}})});$("#txtSearchRecord").on("keypress",function(n){n.keyCode==13});$("#txtSelectionInfo").on("keypress",function(n){n.keyCode==13&&$("#search").click()})});$(document).ready(function(){formulary.fn_GetFormularyListLoad()});var formulary={fn_GetFormularyListLoad:function(){var n={};$("#SearchForm").serializeArray().map(function(t){n[t.name]=t.value});$.post("/Formulary/FilteredFormulary",{searchModelEntity:n,sortBy:"",pageIndex:1},function(n){n.search("sessionModel")>0?location.reload():$("#dvClaimPartial").html(n)})},fn_FilterFormulary:function(){var n={};n.strValue=$("#txtSelectionInfo").val();$.ajax({type:"POST",url:"/Formulary/FilteredFormulary",data:n,success:function(n){n.search("sessionModel")>0?location.reload():($("#dvFormularyPartial").html(""),$("#dvFormularyPartial").html(n))}})},fn_BidDetails:function(n,t,i){var r,u;$("#modalHeader").html("Formulary Details ("+i+")");document.getElementById("chkShowAll").checked=t;r=!1;t&&(showRestrictedNDC=1,r=!0);$('[name="ShowAll"]').val(r);u={};u.formularyId=n;u.showAll=r;$("#divClaimList").addClass("ajaxLoading");$.ajax({type:"POST",url:"/Formulary/FormularyDetails",data:u,success:function(t){t.search("sessionModel")>0?location.reload():($("#FormularyId").val(n),$("#dvFormularyDetailsHeading").show(),$("#dvFormularyDetailsPartial").html(t),commanAjax.fn_SetActiveFirstRow("#tblFormularyDetails"),$("#THSFormularyDetailModel").modal("show"),$("#divClaimList").removeClass("ajaxLoading"))}})},fn_SearchFormulary:function(){var t,i,n;$("#dvFormularyDetailsPartial").addClass("ajaxLoading");t=!1;document.getElementById("chkShowAll").checked&&(t=!0);$('[name="ShowAll"]').val(t);i=$("#FormularyId").val();n={};n.formularyId=i;n.searchRecord=$("#SearchRecord").val().replace("Search NDC","");n.showAll=t;$.ajax({type:"POST",url:"/Formulary/FormularyDetails",data:n,success:function(n){n.search("sessionModel")>0?location.reload():($("#FormularyId").val(i),$("#dvFormularyDetailsHeading").show(),$("#dvFormularyDetailsPartial").html(n),commanAjax.fn_SetActiveFirstRow("#tblFormularyDetails"),$("#dvFormularyDetailsPartial").removeClass("ajaxLoading"))}})},fn_GetUrl:function(){return"/Formulary/FilteredFormulary"},fn_GetUrlInnerList:function(){return"/Formulary/FormularyDetails"},fn_GetLoadingDiv:function(){return"#dvClaimPartial"},fn_GetLoadingInnerDiv:function(){return"#divFormualryDetail"},fn_GetInnerFormName:function(){return"formularyDetailForm"},fn_GetFormularyDetailForm:function(){return"formularyDetailForm"},fn_CloseCurrentModel:function(){setTimeout(function(){$("#tblFormulary").find("tbody tr:first")!=undefined&&$("#tblFormulary tbody tr:first").find("td").length>1&&$("#tblFormulary tr.selected").click()},100)},fn_BidDetailsOnReset:function(){var i=$("#hdnFormularyId").val(),r=!1,u=i,n,t;document.getElementById("chkShowAll").checked=r;n=!1;r&&(showRestrictedNDC=1,n=!0);$('[name="ShowAll"]').val(n);t={};t.formularyId=i;t.showAll=n;$.ajax({type:"POST",url:"/Formulary/FormularyDetails",data:t,success:function(n){n.search("sessionModel")>0?location.reload():($("#FormularyId").val(i),$("#dvFormularyDetailsHeading").show(),$("#dvFormularyDetailsPartial").html(n),commanAjax.fn_SetActiveFirstRow("#tblFormularyDetails"),$("#THSFormularyDetailModel").modal("show"))}})}};